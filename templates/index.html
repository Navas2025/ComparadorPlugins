<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Comparador de Plugins y Temas WordPress</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üîß Comparador de Plugins y Temas WordPress</h1>
            <p>Gesti√≥n entre Plugins-WP.online y Weadown.com</p>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-tab="plugins" onclick="switchTab('plugins')">Plugins</button>
            <button class="tab" data-tab="themes" onclick="switchTab('themes')">Temas</button>
        </div>

        <!-- Plugins Tab Content -->
        <div class="tab-content active" data-tab="plugins">
            <!-- Scraping Controls -->
            <div class="scraping-controls">
                <h3>üîÑ Controles de Scraping</h3>
                <div class="button-grid">
                    <button id="btn-pluginswp-plugins" class="btn btn-primary" onclick="scrapeSite('pluginswp', 'plugins')">
                        üîÑ Scrapear PW Plugins
                    </button>
                    <button id="btn-weadown-plugins" class="btn btn-primary" onclick="scrapeSite('weadown', 'plugins')">
                        üîÑ Scrapear WD Plugins
                    </button>
                    <button id="btn-compare-plugins" class="btn btn-success" onclick="compareAll('plugins')">
                        üîç Comparar Plugins
                    </button>
                </div>

                <!-- Threshold Control -->
                <div class="threshold-control">
                    <label>Umbral de Similitud:</label>
                    <input type="range" id="threshold-slider" class="threshold-slider" min="80" max="100" value="80">
                    <span id="threshold-value" class="threshold-value">80%</span>
                </div>

                <!-- Progress Bars -->
                <div class="progress-section">
                    <div id="progress-pluginswp-plugins" class="progress-item">
                        <div class="progress-label">PW Plugins</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                        <div class="progress-message">IDLE</div>
                    </div>
                    <div id="progress-weadown-plugins" class="progress-item">
                        <div class="progress-label">WD Plugins</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                        <div class="progress-message">IDLE</div>
                    </div>
                </div>
            </div>

            <!-- Stats -->
            <div class="stats">
                <div class="stat-card green">
                    <h3>Con Coincidencia</h3>
                    <p id="stat-matches-plugins">0</p>
                </div>
                <div class="stat-card yellow">
                    <h3>Desactualizados</h3>
                    <p id="stat-outdated-plugins">0</p>
                </div>
                <div class="stat-card red">
                    <h3>Sin Match</h3>
                    <p id="stat-nomatch-plugins">0</p>
                </div>
                <div class="stat-card gray">
                    <h3>Blacklisted</h3>
                    <p id="stat-blacklisted-plugins">0</p>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="controls">
                <input type="text" id="search-input" class="search-box" placeholder="üîç Buscar plugin..." oninput="searchItems()">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="todos" onclick="setFilter('todos')">Todos</button>
                    <button class="filter-btn" data-filter="exactos" onclick="setFilter('exactos')">Con Match</button>
                    <button class="filter-btn" data-filter="similares" onclick="setFilter('similares')">Similares</button>
                    <button class="filter-btn" data-filter="sin_match" onclick="setFilter('sin_match')">Sin Match</button>
                    <button class="filter-btn" data-filter="desactualizados" onclick="setFilter('desactualizados')">Desactualizados</button>
                </div>
            </div>

            <!-- Table -->
            <div id="table-container">
                <div class="empty-state">
                    <h3>üì≠ No hay datos todav√≠a</h3>
                    <p>Haz clic en "Scrapear PW Plugins" para comenzar</p>
                </div>
            </div>
        </div>

        <!-- Themes Tab Content -->
        <div class="tab-content" data-tab="themes">
            <!-- Scraping Controls -->
            <div class="scraping-controls">
                <h3>üîÑ Controles de Scraping</h3>
                <div class="button-grid">
                    <button id="btn-pluginswp-themes" class="btn btn-primary" onclick="scrapeSite('pluginswp', 'themes')">
                        üîÑ Scrapear PW Temas
                    </button>
                    <button id="btn-weadown-themes" class="btn btn-primary" onclick="scrapeSite('weadown', 'themes')">
                        üîÑ Scrapear WD Temas
                    </button>
                    <button id="btn-compare-themes" class="btn btn-success" onclick="compareAll('themes')">
                        üîç Comparar Temas
                    </button>
                </div>

                <!-- Progress Bars -->
                <div class="progress-section">
                    <div id="progress-pluginswp-themes" class="progress-item">
                        <div class="progress-label">PW Temas</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                        <div class="progress-message">IDLE</div>
                    </div>
                    <div id="progress-weadown-themes" class="progress-item">
                        <div class="progress-label">WD Temas</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                        <div class="progress-message">IDLE</div>
                    </div>
                </div>
            </div>

            <!-- Stats -->
            <div class="stats">
                <div class="stat-card green">
                    <h3>Con Coincidencia</h3>
                    <p id="stat-matches-themes">0</p>
                </div>
                <div class="stat-card yellow">
                    <h3>Desactualizados</h3>
                    <p id="stat-outdated-themes">0</p>
                </div>
                <div class="stat-card red">
                    <h3>Sin Match</h3>
                    <p id="stat-nomatch-themes">0</p>
                </div>
                <div class="stat-card gray">
                    <h3>Blacklisted</h3>
                    <p id="stat-blacklisted-themes">0</p>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="controls">
                <input type="text" class="search-box" placeholder="üîç Buscar tema..." oninput="searchItems()">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="todos" onclick="setFilter('todos')">Todos</button>
                    <button class="filter-btn" data-filter="exactos" onclick="setFilter('exactos')">Con Match</button>
                    <button class="filter-btn" data-filter="similares" onclick="setFilter('similares')">Similares</button>
                    <button class="filter-btn" data-filter="sin_match" onclick="setFilter('sin_match')">Sin Match</button>
                    <button class="filter-btn" data-filter="desactualizados" onclick="setFilter('desactualizados')">Desactualizados</button>
                </div>
            </div>

            <!-- Table -->
            <div id="table-container-themes">
                <div class="empty-state">
                    <h3>üì≠ No hay datos todav√≠a</h3>
                    <p>Haz clic en "Scrapear PW Temas" para comenzar</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚úèÔ∏è Editar Match Manual</h2>
                <button class="modal-close" onclick="closeEditModal()">&times;</button>
            </div>
            <div class="form-group">
                <label>Nombre:</label>
                <input type="text" id="edit-item-name" readonly>
            </div>
            <div class="form-group">
                <label>URL de Weadown:</label>
                <input type="text" id="edit-weadown-url" placeholder="https://weadown.com/...">
            </div>
            <div class="form-group">
                <label>Nombre en Weadown:</label>
                <input type="text" id="edit-weadown-name" placeholder="Nombre exacto del plugin/tema">
            </div>
            <div class="form-group">
                <label>Versi√≥n en Weadown:</label>
                <input type="text" id="edit-weadown-version" placeholder="1.0.0">
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="saveManualMatch()">üíæ Guardar</button>
                <button class="btn" onclick="closeEditModal()">Cancelar</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
